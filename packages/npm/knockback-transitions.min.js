/*
  knockback-transitions.js 0.1.1
  (c) 2011, 2012 Kevin Malakoff - http://kmalakoff.github.com/knockback/
  License: MIT (http://www.opensource.org/licenses/mit-license.php)
*/(function(){return function(e){return typeof define=="function"&&define.amd?define("knockback-transitions",e):e.call(this)}(function(){var e,t,n,r,i;try{this.kb=n=!this.kb&&typeof require!="undefined"?require("knockback"):this.kb}catch(s){({})}this.kb||(this.kb=n||(n={})),t=function(e){return e&&e.nodeType===1},n.transitions||(n.transitions={}),n.fallback_transitions||(n.fallback_transitions={}),n.MAX_TRANSITION=2e3,n.transitions.END_EVENT=function(){var e,t;return t=document.createElement("knockback"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",msTransition:"MSTransitionEnd",transition:"transitionend"},"kbTransitionEnd"}(),n.active_transitions=n.transitions.END_EVENT==="kbTransitionEnd"?n.fallback_transitions:n.transitions,$.fn.startTransition=function(e,t){var r,i,s=this;typeof e=="function"&&(t=e,e=null),i=null,r=function(){return s.off(n.transitions.END_EVENT,r),clearTimeout(i),!t||t()},this.one(n.transitions.END_EVENT,r),this.addClass(e),i=setTimeout(r,n.MAX_TRANSITION)},$.fn.stopTransition=function(){this.trigger(n.transitions.END_EVENT)},e=function(e){var t,n,r,i;r={},i=e.style;for(t in i){n=i[t];if(!n)continue;r[t]=n}return r},n.TransitionSavedState=function(){function e(e){var n,r;this.el_states=[];for(r in e)n=e[r],!t(n)||this.el_states.push({el:n,className:n.className,cssText:n.style.cssText});return}return e.prototype.restore=function(){var e,t,n,r,i;i=this.el_states;for(n=0,r=i.length;n<r;n++)t=i[n],e=t.el,e.className=t.className,e.style.cssText=t.cssText;this.el_states=null},e}(),typeof exports!="undefined"&&(exports.TransitionSavedState=n.TransitionSavedState),n.transitions.SlideUp=function(e,t){if(!e.from){e.callback();return}$(e.to).css({height:$(e.container).height()}).startTransition(t.forward?"on-top slideup in":"on-top slideup out reverse",e.callback)},n.transitions.FadeIn=function(e,t){var n,r;n=$(e.to).css({"min-height":$(e.container).height()}),r="on-top fade",r+=t.forward?" in":" out",t.slow&&(r+=" slow"),n.startTransition(r,e.callback)},n.transitions.Slide=function(e,t){var n,r,i;if(!e.from){e.callback();return}i=$(e.container).width(),n=$(e.from).css({width:i}),r=$(e.to).css({width:i}),t.forward?(n.startTransition("slide out"),r.startTransition("slide in",e.callback)):(r.startTransition("slide out reverse"),n.startTransition("slide in reverse",e.callback))},this.Zepto&&(r=function(e,t,n){return e.__kb_zepto_endEvent=typeof t=="string"?$.fx.animationEnd:$.fx.transitionEnd,e.__kb_zepto_callback=function(){if(!e.__kb_zepto_endEvent)return;return delete e.__kb_zepto_endEvent,delete e.__kb_zepto_callback,!n||n.call(this)},e.__kb_zepto_callback},i=$.fn.anim,$.fn.anim=function(e,t,n,s){var o,u,a,f;for(a=0,f=this.length;a<f;a++)o=this[a],u=r(o,e,s);return i.call(this,e,t,n,u),this},$.fn.stop=function(){var e,t,n;for(t=0,n=this.length;t<n;t++)e=this[t],e.__kb_zepto_endEvent&&$(e).trigger(e.__kb_zepto_endEvent);return this}),n.SLIDE_UP_DURATION=300,n.fallback_transitions.SlideUp=function(e,t){var r,i,s,o;if(!e.from){e.callback();return}r=$(e.to),i=function(){return r.stop(),r.off(n.transitions.END_EVENT,i),e.callback()},s=e.container.clientHeight,o=e.to.clientTop,t.forward?r.addClass("on-top").css({top:o+s}).animate({top:o},n.SLIDE_UP_DURATION,"linear",i):r.addClass("on-top").animate({top:o+s},n.SLIDE_UP_DURATION,"linear",i),r.one(n.transitions.END_EVENT,i)},n.FADE_IN_DURATION=300,n.fallback_transitions.FadeIn=function(e,t){var r,i;r=$(e.to),i=function(){return r.stop(),r.off(n.transitions.END_EVENT,i),e.callback()},r.css({"min-height":$(e.container).height()}),t.forward?(r.css({opacity:0}),r.animate({opacity:1},n.FADE_IN_DURATION,"swing",e.callback)):(r.css({opacity:1}),r.animate({opacity:0},n.FADE_IN_DURATION,"swing",e.callback)),r.one(n.transitions.END_EVENT,i)},n.SLIDE_DURATION=300,n.fallback_transitions.Slide=function(e,t){var r,i,s,o,u,a,f;if(!e.from){e.callback();return}return i=$(e.to),r=$(e.from),s=function(){return i.stop(),r.stop(),i.off(n.transitions.END_EVENT,s),e.callback()},f=$(e.container).width(),o=n.SLIDE_DURATION,t.forward?(r.animate({left:e.from.clientLeft-f},o,"linear"),a=e.to.clientLeft,i.css({left:a+f}).animate({left:a},o,"linear",s)):(u=e.from.clientLeft,r.css({left:u-f}).animate({left:u},o,"linear"),i.animate({left:e.to.clientLeft+f},o,"linear",s)),i.one(n.transitions.END_EVENT,s)};return})}).call(this);